{% comment %} {% extends "base/base.html" %} {% endcomment %}

{% comment %} {% block content %} {% endcomment %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/teacher_attendance.css' %}">

<h2>Mark Attendance</h2>

<div class="attendance-container">

    {% if classes %}
    <form method="post" action="{% url 'submit_attendance' %}">
        {% csrf_token %}

        <!-- Select Class -->
        <label for="class_select">Select Class:</label>
        <select id="class_select" name="class_id" required>
            <option value="">-- Select Class --</option>
            {% for cls in classes %}
                <option value="{{ cls.id }}">{{ cls.class_name }} - Section {{ cls.section }}</option>
            {% endfor %}
        </select>

        <!-- Select Subject -->
        <label for="subject_select">Select Subject:</label>
        <select id="subject_select" name="subject_id" required>
            <option value="">-- Select Subject --</option>
            {% for subject in subjects %}
                <option value="{{ subject.id }}">{{ subject.subject.subject_name }}</option>
            {% endfor %}
        </select>

        <hr>

        <!-- Students Table -->
        <table class="attendance-table">
            <thead>
                <tr>
                    <th>Student Name</th>
                    <th>Admission No</th>
                    <th>Class</th>
                    <th>Section</th>
                    <th>Present</th>
                </tr>
            </thead>
            <tbody>
                {% for item in users_student %}
                    <tr>
                        <td>{{ item.student.name }}</td>
                        <td>{{ item.student.admission_no }}</td>
                        <td>{{ item.student.class_name.class_name }}</td>
                        <td>{{ item.student.class_name.section }}</td>
                        <td>
                            <input type="checkbox" name="present_{{ item.student.id }}" value="present">
                        </td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="5">No students found for selected class/subject.</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>

        <button type="submit" class="btn-submit">Submit Attendance</button>
    </form>
    {% else %}
        <p>You are not assigned to any class or subjects.</p>
    {% endif %}

</div>

{% comment %} {% endblock %} {% endcomment %}

{% comment %} {% block extra_css %} {% endcomment %}
{% comment %} <link rel="stylesheet" href="{% static 'css/teacher_attendance.css' %}"> {% endcomment %}
{% comment %} {% endblock %} {% endcomment %}
