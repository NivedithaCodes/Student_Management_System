{% load static %}
<link rel="stylesheet" href="{% static 'css/teacher_students.css' %}">

<h2>My Students</h2>

<!-- FILTER -->
<form method="GET" style="margin-bottom: 20px;">
    <select name="class">
        <option value="">-- Filter by class --</option>
        {% for cls in all_classes %}
            <option value="{{ cls.id }}" {% if filter_class == cls.id|stringformat:"s" %}selected{% endif %}>
                {{ cls.class_name }} - {{ cls.section }}
            </option>
        {% endfor %}
    </select>
    <button type="submit">Filter</button>
</form>


<!-- CLASS TEACHER STUDENTS -->
{% if class_teacher_class %}
<h3>Students of My Class ({{ class_teacher_class.class_name }} - {{ class_teacher_class.section }})</h3>

<div class="students-grid">
    {% for stu in class_teacher_students %}
        <div class="card student-card">
            <h3>{{ stu.name }}</h3>
            <p><strong>Admission No:</strong> {{ stu.admission_no }}</p>
            <p><strong>Email:</strong> {{ stu.email }}</p>
            <p><strong>Mobile:</strong> {{ stu.mobile }}</p>
        </div>
    {% empty %}
    <p>No students found.</p>
    {% endfor %}
</div>
{% endif %}


<!-- SUBJECT TEACHER STUDENTS -->
<h3>Students of My Assigned Classes</h3>

<div class="students-grid">
    {% for stu in subject_teacher_students %}
        <div class="card student-card">
            <h3>{{ stu.name }}</h3>
            <p><strong>Class:</strong> {{ stu.class_name.class_name }} - {{ stu.class_name.section }}</p>
            <p><strong>Email:</strong> {{ stu.email }}</p>
            <p><strong>Mobile:</strong> {{ stu.mobile }}</p>
        </div>
    {% empty %}
    <p>No students found.</p>
    {% endfor %}
</div>
