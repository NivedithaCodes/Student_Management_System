{% load static %}
<link rel="stylesheet" href="{% static 'css/teacher_students.css' %}">

<h2>My Students</h2>

<!-- ðŸ”½ CLASS FILTER DROPDOWN -->
<form method="GET" style="margin-bottom: 20px;">
  <select name="class">
    <option value="">-- Filter by class --</option>
    {% for cls in all_classes %}
      <option value="{{ cls.id }}" {% if filter_class == cls.id|stringformat:"s" %}selected{% endif %}>
        {{ cls.class_name }} - {{ cls.section }}
      </option>
    {% endfor %}
  </select>
  <button type="submit">Filter</button>
</form>



<!-- â­ SECTION 1: CLASS TEACHER STUDENTS -->
{% if class_teacher_class %}
<h3>Students of My Class ({{ class_teacher_class.class_name }} - {{ class_teacher_class.section }})</h3>
<div class="students-grid">

  {% for stu in class_teacher_students %}
  <div class="card student-card class-student">

    <div class="card-icon">
      <i class="fa fa-users"></i>
    </div>

    <h3>{{ stu.name }}</h3>
    <p><strong>Admission No:</strong> {{ stu.admission_no }}</p>
    <p><strong>Email:</strong> {{ stu.email }}</p>
    <p><strong>Mobile:</strong> {{ stu.mobile }}</p>

    <a href="{% url 'student_profile' stu.id %}" class="btn">View Profile</a>

    <span class="class-teacher-badge">My Class</span>

  </div>
  {% endfor %}
</div>
{% endif %}



<!-- â­ SECTION 2: SUBJECT TEACHER STUDENTS -->
<h3>Students of Classes I Teach</h3>
<div class="students-grid">

  {% for stu in subject_teacher_students %}
  <div class="card student-card">

    <div class="card-icon">
      <i class="fa fa-user-graduate"></i>
    </div>

    <h3>{{ stu.name }}</h3>
    <p><strong>Class:</strong> {{ stu.class_name.class_name }} - {{ stu.class_name.section }}</p>
    <p><strong>Email:</strong> {{ stu.email }}</p>
    <p><strong>Mobile:</strong> {{ stu.mobile }}</p>

    <a href="{% url 'student_profile' stu.id %}" class="btn">View Profile</a>

  </div>
  {% empty %}
    <p>No students found.</p>
  {% endfor %}
</div>
{% comment %} {% load static %}

<link rel="stylesheet" href="{% static 'css/teacher_students.css' %}">
<h2>My Students</h2>

{% if students_list %}
<div class="students-grid">
  
  {% for item in students_list %}
    {% with student=item.student %}
    <div class="card student-card {% if item.is_class_student %}class-student{% endif %}">
      
      <div class="card-icon">
        <i class="fa fa-user-graduate"></i>
      </div>

      <h3>{{ student.name }}</h3>
      <p><strong>Admission No:</strong> {{ student.admission_no }}</p>
      <p><strong>Class:</strong> {{ student.class_name.class_name }}</p>
      <p><strong>Section:</strong> {{ student.class_name.section }}</p>
      <p><strong>Email:</strong> {{ student.email }}</p>
      <p><strong>Mobile:</strong> {{ student.mobile }}</p>

      <a href="{% url 'student_profile' student.id %}" class="btn">View Profile</a>

      {% if item.is_class_student %}
        <span class="class-teacher-badge">Class Student</span>
      {% endif %}

    </div>
    {% endwith %}
  {% endfor %}

</div>
{% else %}
<p>No students available.</p>
{% endif %} {% endcomment %}
{% comment %} {% load static %}
<link rel="stylesheet" href="{% static 'css/teacher_students.css' %}">

<h2>My Students</h2>

{% if users_student %}
  <div class="students-grid">
    {% for item in users_student %}
      {% with student=item.student %}
        <div class="card student-card {% if item.is_class_student %}class-student{% endif %}">
          <div class="card-icon">
            <i class="fa fa-user-graduate"></i>
          </div>
          <h3>{{ student.name }}</h3>
          <p><strong>Admission No:</strong> {{ student.admission_no }}</p>
          <p><strong>Class:</strong> {{ student.class_name.class_name }}</p>
          <p><strong>Section:</strong> {{ student.class_name.section }}</p>
          <p><strong>Email:</strong> {{ student.email }}</p>
          <p><strong>Mobile:</strong> {{ student.mobile }}</p>

          <a href="{% url 'student_profile' student.id %}" class="btn">View Profile</a>

          {% if item.is_class_student %}
            <span class="class-teacher-badge">Class Student</span>
          {% endif %}
        </div>
      {% endwith %}
    {% endfor %}
  </div>
{% else %}
  <p>No students assigned yet.</p>
{% endif %}  {% endcomment %}

{% comment %} {% load static %}
<link rel="stylesheet" href="{% static 'css/teacher_students.css' %}">

<h2>My Students</h2>

{% if users_student %}
  <div class="students-grid">
    {% for student in users_student %}
      <div class="card student-card">
        <div class="card-icon">
          <i class="fa fa-user-graduate"></i>
        </div>
        <h3>{{ student.name }}</h3>
        <p><strong>Admission No:</strong> {{ student.admission_no }}</p>
        <p><strong>Class:</strong> {{ student.class_name.class_name }}</p>
        <p><strong>Section:</strong> {{ student.class_name.section }}</p>
        <p><strong>Email:</strong> {{ student.email }}</p>
        <p><strong>Mobile:</strong> {{ student.mobile }}</p>

        <!-- View Profile button -->
        <a href="{% url 'student_profile' student.id %}" class="btn">View Profile</a>
      </div>
    {% endfor %}
  </div>
{% else %}
  <p>No students assigned yet.</p>
{% endif %}  {% endcomment %}
