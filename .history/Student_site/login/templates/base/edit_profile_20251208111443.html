{% extends "base/base.html" %}

{% block content %}
<div class="edit-wrapper">
  <div class="edit-card">

    <!-- Profile Photo Section -->
    <div class="photo-section" style="text-align: center; margin-bottom: 20px;">
      {% if user.photo %}
        <img src="{{ user.photo.url }}" class="edit-photo" alt="Profile Photo" style="width:120px; height:120px; border-radius:50%; object-fit:cover;">
      {% else %}
        <div style="width:120px; height:120px; border-radius:50%; background:#4f46e5; color:#fff; font-size:48px; display:flex; align-items:center; justify-content:center; margin:auto;">
          {{ user.name|slice:":1"|upper }}
        </div>
      {% endif %}
    </div>

    <!-- Edit Form -->
    <form method="POST" enctype="multipart/form-data" class="edit-form" style="max-width:500px; margin:auto;">
      {% csrf_token %}

      <!-- Upload Photo -->
      <div style="margin-bottom:20px; text-align:center;">
        <label style="cursor:pointer; color:#4f46e5; font-weight:bold;">
          <i class="fa fa-camera"></i> Change Photo
          <input type="file" name="photo" style="display:none;">
        </label>
      </div>

      <!-- Name -->
      <div class="form-group" style="margin-bottom:15px;">
        <label>Name</label>
        <input type="text" name="name" value="{{ user.name }}" required style="width:100%; padding:8px; border-radius:6px; border:1px solid #ccc;">
      </div>

      <!-- Email -->
      <div class="form-group" style="margin-bottom:15px;">
        <label>Email</label>
        <input type="email" name="email" value="{{ user.email }}" required style="width:100%; padding:8px; border-radius:6px; border:1px solid #ccc;">
      </div>

      <!-- Mobile -->
      <div class="form-group" style="margin-bottom:15px;">
        <label>Mobile</label>
        <input type="text" name="mobile" value="{{ user.mobile }}" style="width:100%; padding:8px; border-radius:6px; border:1px solid #ccc;">
      </div>

      <!-- Date of Birth -->
      <div class="form-group" style="margin-bottom:15px;">
        <label>Date of Birth</label>
        <input type="date" name="dob" value="{{ user.dob|date:'Y-m-d' }}" style="width:100%; padding:8px; border-radius:6px; border:1px solid #ccc;">
      </div>

      <!-- Conditional Fields -->
      {% if user.role == "student" %}
        <div class="form-group" style="margin-bottom:15px;">
          <label>Class</label>
          <input type="text" value="{{ user.class_name.class_name }} {{ user.class_name.section }}" disabled style="width:100%; padding:8px; border-radius:6px; border:1px solid #ccc; background:#f1f1f1;">
        </div>
      {% elif user.role == "teacher" %}
        <div class="form-group" style="margin-bottom:15px;">
          <label>Subject</label>
          <input type="text" value="{{ user.subject }}" disabled style="width:100%; padding:8px; border-radius:6px; border:1px solid #ccc; background:#f1f1f1;">
        </div>
      {% endif %}

      <button type="submit" style="background:#4f46e5; color:#fff; padding:10px 25px; border-radius:8px; font-weight:bold; border:none; cursor:pointer;">Save Changes</button>
    </form>
  </div>
</div>
{% endblock %}
