{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
    <style>

 .profile-wrapper {
  display: flex;
  justify-content: center;
  padding: 40px 20px;
}

.profile-card {
  background: #ffffff;
  width: 100%;
  max-width: 650px;
  padding: 35px;
  border-radius: 20px;
  box-shadow: 0 8px 25px rgba(0,0,0,0.12);
  text-align: center;
  animation: fadeIn 0.4s ease-in-out;
}

.profile-photo-container {
  position: relative;
  display: inline-block;
}

.profile-photo {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  object-fit: cover;
  border: 4px solid #4f46e5;
}

.profile-initial {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  background: #4f46e5;
  color: #fff;
  font-size: 48px;
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 0 auto;
  border: 4px solid #4f46e5;
}

.photo-upload input {
  display: none;
}

.upload-btn {
  margin-top: 10px;
  display: inline-block;
  padding: 8px 16px;
  background: #4f46e5;
  color: #fff;
  border-radius: 8px;
  cursor: pointer;
  font-size: 14px;
  transition: 0.3s;
}

.upload-btn:hover {
  background: #3c38c3;
}

.profile-name {
  font-size: 26px;
  font-weight: 700;
  margin-top: 15px;
  color: #111;
}

.profile-role {
  font-size: 16px;
  color: #666;
  margin-bottom: 25px;
}

.profile-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 18px;
  text-align: left;
  margin-top: 20px;
}

.info-box label {
  font-size: 14px;
  font-weight: 700;
  color: #555;
}

.info-box p {
  font-size: 15px;
  color: #222;
  margin-top: 3px;
}

.edit-btn-wrapper {
  text-align: center;
  margin-top: 30px;
}

.edit-btn {
  padding: 12px 28px;
  background: #4f46e5;
  color: #fff;
  font-size: 16px;
  border-radius: 10px;
  text-decoration: none;
  transition: 0.3s;
  font-weight: bold;
}

.edit-btn:hover {
  background: #3b38c0;
}

/* Smooth fade animation */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to   { opacity: 1; transform: translateY(0); }
}

</style>
</head>
<body>
 <div class="profile-wrapper">

  <!-- Profile Card -->
  <div class="profile-card">

    <!-- Profile Image -->
    <div class="profile-photo-container">
      {% comment %} {% if user.photo %}
        <img src="{{ user.photo.url }}" class="profile-photo" alt="Profile Photo">
      {% else %}
        <div class="profile-initial">
          {{ user.name|slice:":1"|upper }}
        </div>
      {% endif %} {% endcomment %}

     <img src="{% if user.photo %}{{ user.photo.url }}{% else %}{% static 'images/default_profile.png' %}{% endif %}" 
     alt="Profile Photo" 
     class="edit-photo"
     style="width:120px; height:120px; border-radius:50%; object-fit:cover;">


      <form method="POST" enctype="multipart/form-data" class="photo-upload">
        {% csrf_token %}
        <label class="upload-btn">
          <i class="fa fa-camera"></i> Change Photo
          <input type="file" name="photo" onchange="this.form.submit()">
        </label>
      </form>
    </div>

    <!-- Name & Role -->
    <h2 class="profile-name">{{ user.name }}</h2>
    <p class="profile-role">{{ user.role|capfirst }}</p>

    <!-- Information Grid -->
    <div class="profile-grid">
      <div class="info-box">
        <label>Email</label>
        <p>{{ user.email }}</p>
      </div>

      <div class="info-box">
        <label>Mobile</label>
        <p>{{ user.mobile|default:"—" }}</p>
      </div>

      <div class="info-box">
        <label>DOB</label>
        <p>{{ user.dob|default:"—" }}</p>
      </div>

      {% if user.role == "student" %}
      <div class="info-box">
        <label>Class</label>
        <p>{{ user.class_name.class_name }} {{ user.class_name.section }}</p>
      </div>
      <div class="info-box">
        <label>Admission No</label>
        <p>{{ user.admission_no|default:"—" }}</p>
      </div>

      {% endif %}

      {% if user.role == "teacher" %}
      <div class="info-box">
        <label>Subject</label>
        <p>{{ user.subject|default:"—" }}</p>
      </div>
      <div class="info-box">
        <label>Admission No</label>
        <p>{{ user.admission_no|default:"—" }}</p>
      </div>

      {% endif %}
    </div>

    <div class="edit-btn-wrapper">
      <a href="{% url 'edit_profile'  %}" class="edit-btn">Edit Profile</a>
    </div>
  </div>
</div>

</body>
</html>